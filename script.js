const build = [
    ["title", "Studio Project 1 ", "A Nature Filled Art Journey", "By: Kevin d'Anunciacao" ,""],
    ["TT","October 5th, 2024 - Journey Started right as I woke up, made some coffee, and went to sit on the couch.","stop.kms"],
    ["Pic2", "", "assets/IMG_1283.webp","assets/IMG_1274.webp","assets/sounds/Dog walking edit.mp3"],
    ["PicL", "", "assets/IMG_2872.webp", "Question 1 - Do you have a pet? Why did you get them? What is your relationship to them?", "I sat down and instantly my dog comes over to me for attention. It is a joke in my house how Miya is like my shadow. She follows me everywhere I go whenever I am home. I still remember when we first got her, it was a year after our previous dog suddenly passed away. Our family always had dogs, and after the passing of our previous dog Maggy, we ended up fostering dogs for a while. We grew to love pitbull labs as they were the most loving, calm, yet playful breed we ever fostered. This lead us to eventually get Miya as just a puppy. Her head and paws  were too big for her body at the time and everytime she would run around she would end up doing a front flip, but this never stopped her. Nowadays she is less energetic, yet she still will always be right at my side no matter what.","assets/sounds/Dog walking edit.mp3"],
    ["PicR", "", "assets/IMG_1278.webp","In House Vine", "While I was sitting on the couch with my dog, I noticed the tall vine that my mom brought home one day and takes care of. ","stop.kms"],
    ["TTs", `Question 2 - Do you bring plants or animals into your home? Why did you get them, and why are they important to you? Do you think of them as nature?`, `I personally never have taken plants or animals into my house myself, however my mom loves to bring in plants to have as little decorations around the house. I do indeed think of them as nature, and I do love the look of them around. It almost brings me peace seeing a plant in a pot sitting over my TV as I watch in the morning.`],
    ["PicR", "", "assets/IMG_1279.webp", "", "On the ay outside my house, I ended up seeing another plant sitting on a windowsill."],
    ["PicL", "", "assets/IMG_1280.webp", "", "Saw this Picture of all bird types in New Jersey in my house. It's strange how you don't notice something you're whole life."],
    ["TT", "After looking at the house plants and reading about the birds, I got the urge to go outside and really enjoy nature. On my way, I ended up seeing some unknown visiters...", " ","assets/sounds/Outside house.mp3"],
    ["Pic2", "", "assets/IMG_1284.webp", "assets/IMG_1277.webp", "", ],
    ["TTs", 'Question 3 - When uninvited animals, often referred to as "pests," come into your home, do you ever think of them as nature?', `When uninvited animals or “pests” come into my house, I often do think of them as nature, but depending on the animal, I may not treat it as nature. Things such as mice, ladybugs, stink bugs, moths, ants, flys, rolly pollys, and roaches, I do my best not to kill and instead will either leave them be, or capture them and bring them outside. HOWEVER, when it comes to spiders, I do not mess around and am terrified of them, and it doesn't help that we get them all the time in my home. Whenever I see one I freak and half the time, I don't even have the balls to go and kill them. There was a time I didn't sleep in my own bedroom for 2 weeks cause I saw a huge spider and it crawled under my bed before I could kill it. So in short, I do think of them all as nature, I just don't treat spiders with any respect as I do other pests.`],
    ["PicL", "", "assets/IMG_1285.webp", "Backyard Buddy","Stepping into my backyard, I noticed a little friend moving through the tall, uncut grass. I realized how much I consider my yard as nature. There are always animals running about, and my dog plays and chases squirrels and groundhogs. It's my own little piece of nature that I love and enjoy."],
    ["Pic2", "","assets/IMG_0865.webp","assets/IMG_1098.webp", "assets/sounds/Outside house.mp3"],
    ["TTs", "Question 4 - Does your home have a lawn? Do you think of your lawn as nature?","My home has a front yard and backyard that are decently big. I also definitely would consider my yard a place of nature. There are always animals running about, my dog playing and chasing off squirrels and groundhogs. I see it as my own little piece of nature that I love and enjoy."],
    ["PicR","","assets/IMG_1276.webp",`Question 5 - How do you define the word "weed"? Make a list of plants you consider to be weeds.`, "I would define the word weed as a pest. It grows and grows interrupting nature in its path. It takes over gardens and frontyard alike, revealing one's unkempt tendencies and appearance. However, the plants themselves, if not so invasive, are sometimes truly beautiful nice plants. Plants I consider to be weeds are things such as poison ivy, nettles, and dandelions. "],
    ["TT", "After enjoying time around my house, I wanted to experience more of what nature has to offer. So, I headed to the park down the street to sit by the stream.", "assets/sounds/Wood trails.mp3"],
    ["Pic2", "","assets/IMG_1268.webp", "assets/IMG_1269.webp",""],
    ["PicL", "", "assets/IMG_1268.webp", "Yet it ran dry.", " "],
    ["PicL", "", "assets/IMG_1265.webp", "So off I went.", " "],
    ["cen", "","assets/IMG_1267.webp"],
    ["cen", "", "assets/IMG_1270.webp"],
    ["TTs", `Question 6 - Did you spend much time as a child in places you considered to be wild or natural areas? Do you currently visit such places? How often and how much time? Briefly describe the places if any.`, `As a kid, I loved to be outside and explore at the park that is right down my road. I loved walking the paths, jumping down to the stream, and going into the woods that surround the park where I could get lost for hours. It would be at least once or twice a week I would find myself going over the bridge and into the trails where I would be surrounded by trees. Jumping over some bushes off the trail I would go down to the bank of the stream and at this point, my mind would wonder as I navigated the wilderness randomly until I would head back home.`],
    ["TTs", `Question 7 - What's the first thing you think of when you hear the words "nature" and "wilderness"? Is there a difference between them? If so, what is it?`, `The first thing that I think of when I hear the words “nature” and “wilderness” is the outdoors, namely the middle of the woods or a nice hiking trail. I don't think there is a genuine difference between nature and wilderness, however in my head I do picture them as being different things. I picture nature as a beautiful nice hiking trail or big open field. While wilderness I think of as the middle of the woods and a place far removed from human civilization.`],
    ["Pic2", "assets/IMG_1271.webp", "assets/IMG_1272.webp"],
    ["TT", "After enjoying the gorgeous weather and plants, I decided to go to a local Apple Orchard to continue the beautiful day outside.", "stop.kms"],
    ["TT", "Right as I arrived, I noticed a beautiful man-made scene of pumpkins around a small tree", "assets/sounds/Park 1.mp3"],
    ["PicL", "", "assets/IMG_1247.webp",`Question 8 - Do you consider humans separate from nature? Why or why not?`, `Yes, I do consider humans separate from nature. I think this because humans have become so far removed from our roots of living in nature that we simply shouldn't even be grouped in with it. When I think of an animal, I instantly picture a deer or bear in the wild just walking around or hunting. Humans however, the wild is the last place I picture us. I picture humans in offices, at computers, in subways, in houses eating at a table, the list goes on before I think of a human hiking. Humans do a lot to harm the environment, however, they also do things that make you really appreciate and love it as well.`],
    ["PicR", "", "assets/IMG_1248.webp", `Surrounded by Nature`, "As I travelled into the orchard, I picked a row of apple trees that really stood out to me, and those were the pinata apples. As I travlled into the seemingly never ending row lined of apple trees, I felt a sense of happiness and calmness. Almost as if the trees made me feel safe and calm as they blocked the rest of the world out."],
    ["Pic2", "", "assets/IMG_1253.webp", "assets/IMG_1250.webp", ""],
    ["TTs", `Question 9 - Where does most of your knowledge of nature of the natural world come from?`,`Most of my knowledge of the natural world comes from just my own experiences of being outside from when I was younger and as I grow older. I would hear things about animals from friends and family or on TV or in school. However, when it comes to understanding nature, the different plants, how to be safe, that stuff all came from trial and error.` ],
    ["TT", "So calm and peaceful. my mind started to wander."],
    ["PicL", "", "assets/IMG_1249.webp", "Some going through life alone.", " "],
    ["PicR", "", "assets/IMG_1258.webp", "And some with a friend by their side.", " "],
    ["PicL", "", "assets/IMG_1255.webp","Some young and so full of potential.", " "],
    ["TT", "Others not so much."],
    ["cen", "","assets/IMG_1254.webp"],
    ["TT", "Yet they all lived amongst eachother."],
    ["PicL", "", "assets/IMG_1259.webp", "Without a care in the world.", ""],
    ["TT", "As if knowing one another."],
    ["Pic2", "", "assets/IMG_1256.webp", "assets/IMG_1257.webp"],
    ["TT", "No matter the species"],
    ["Pic2", "", "assets/IMG_1263.webp", "assets/IMG_1261.webp"],
    ["TT", "Some even coming and helping out."],
    ["cen", "", "assets/IMG_1264.webp"],
    ["TT", "No matter who,"],
    ["TT", "or what,"],
    ["TT", "or where you are..."],
    ["TT", "Everything in life comes from the same place."],
    ["cen", "", "assets/IMG_1266.webp"],
    ["PicL", "", "assets/IMG_1266.webp","","For my representation of nature, I chose everyones favorite: a tree. this one in particular, is the massive tree that stands tall and proud in the center of the park. The reason for this is the vital role that trees truly play in not just humans, but every other living thing in the world. It allows life to even exist, by giving us oxygen to breathe, and yet everyday they are taken for granted by nearly all living things."]
    // Add more content sections as needed
];
var currentIndex = 0;
var scrolling = false;
var currentAudioPlaying = "";
var currentAudio = null;

const contentDiv = document.getElementById('content');

function createSections() {
    build.forEach((item, index) => {
        let section = document.createElement('div');
        section.classList.add('section', 'hidden');

        if (item[0] === 'PicL' || item[0] === 'PicR') {
            if (item[1]) {
                section.style.backgroundImage = `url('${item[1]}')`;
                section.style.backgroundSize = 'cover';
                section.style.backgroundPosition = 'center';
                section.style.backgroundRepeat = 'no-repeat';
            } else {
                section.style.backgroundColor = '#121212';
            }
        } else {
            section.style.backgroundColor = '#121212';
        }

        let sectionContent = document.createElement('div');
        sectionContent.classList.add('section-content');

        switch(item[0]) {
            case 'title':
                sectionContent.classList.add('title-page');
                sectionContent.innerHTML = `
                    <h1>${item[1]}</h1>
                    <p>${item[2]}</p>
                    <p> </p>
                    <p> </p>
                    <p2>${item[3]}</p2>
                `;
                break;

            case 'PicL':
            case 'PicR':
                sectionContent.classList.add('image-page');
                let imageContainer = document.createElement('div');
                imageContainer.classList.add('image-container');
                imageContainer.innerHTML = `<img src="${item[2]}" alt="${item[3]}" loading="lazy">`;

                let textContainer = document.createElement('div');
                textContainer.classList.add('text-container');
                textContainer.innerHTML = `
                    <h2>${item[3]}</h2>
                    <p>${item[4]}</p>
                `;

                if (item[0] === 'PicL') {
                    sectionContent.appendChild(imageContainer);
                    sectionContent.appendChild(textContainer);
                } else {
                    sectionContent.appendChild(textContainer);
                    sectionContent.appendChild(imageContainer);
                }
                break;

            case 'Pic2':
                sectionContent.classList.add('double-image-page');
                let firstImage = document.createElement('div');
                firstImage.classList.add('image-container');
                firstImage.innerHTML = `<img src="${item[2]}" alt="First Image" loading="lazy">`;

                let secondImage = document.createElement('div');
                secondImage.classList.add('image-container');
                secondImage.innerHTML = `<img src="${item[3]}" alt="Second Image" loading="lazy">`;

                sectionContent.appendChild(firstImage);
                sectionContent.appendChild(secondImage);
                break;

            case 'TTs':
                sectionContent.classList.add('transition-text');
                sectionContent.innerHTML = `
                    <h2>${item[1]}</h2>
                    <p>${item[2]}</p>
                `;
                break;

            case 'cen':
                sectionContent.classList.add('cen-page');
                let cenImage = document.createElement('img');
                cenImage.src = item[2];
                cenImage.alt = "Centered Image";
                sectionContent.appendChild(cenImage);
                break;

            case 'TT':
                sectionContent.classList.add('transition-text');
                sectionContent.innerHTML = `<p>${item[1]}</p>`;
                break;

            default:
                console.error('Unknown content type:', item[0]);
        }

        section.appendChild(sectionContent);
        contentDiv.appendChild(section);

        if (index === 0) {
            section.classList.remove('hidden');
            section.classList.add('visible');
        }
    });
}

function handleAudioPlayback(audioFile) {
    if (audioFile === currentAudioPlaying) {
        return;
    }

    if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
    }

    if (audioFile === "stop.kms") {
        currentAudioPlaying = "";
        return;
    }

    if (audioFile && audioFile.endsWith('.mp3')) {
        currentAudio = new Audio(audioFile);
        currentAudio.loop = true;
        currentAudio.play();
        currentAudioPlaying = audioFile;
    }
}

function handleSectionTransitions(nextIndex) {
    const sections = document.querySelectorAll('.section');
    const currentSection = sections[currentIndex];
    const nextSection = sections[nextIndex];

    currentSection.classList.remove('visible');
    currentSection.classList.add('hidden');

    setTimeout(() => {
        nextSection.classList.remove('hidden');
        nextSection.classList.add('visible');
        currentIndex = nextIndex;
        scrolling = false;

        const audioFile = build[nextIndex][build[nextIndex].length - 1];
        handleAudioPlayback(audioFile);
    }, 800);
}

function goToNextSection() {
    if (scrolling) return;
    scrolling = true;
    const nextIndex = (currentIndex + 1) % build.length;
    handleSectionTransitions(nextIndex);
}

function goToPreviousSection() {
    if (scrolling || currentIndex === 0) return;
    scrolling = true;
    const previousIndex = (currentIndex - 1 + build.length) % build.length;
    handleSectionTransitions(previousIndex);
}

window.addEventListener('wheel', (e) => {
    if (e.deltaY > 0) {
        goToNextSection();
    } else if (e.deltaY < 0) {
        goToPreviousSection();
    }
});

let touchStartY = 0;
window.addEventListener('touchstart', (e) => {
    touchStartY = e.changedTouches[0].clientY;
});

window.addEventListener('touchend', (e) => {
    const touchEndY = e.changedTouches[0].clientY;
    if (touchEndY < touchStartY - 50) {
        goToNextSection();
    } else if (touchEndY > touchStartY + 50) {
        goToPreviousSection();
    }
});

document.getElementById('startButton').addEventListener('click', () => {
    document.getElementById('overlay').style.display = 'none';
    createSections();
    document.getElementById('content').classList.remove('hidden');
    const firstSection = document.querySelector('.section');
    setTimeout(() => {
        firstSection.classList.add('visible');
    }, 100);
});
